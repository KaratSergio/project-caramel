{"version":3,"file":"commonHelpers.js","sources":["../src/js/get-api.js","../src/js/products.js","../src/js/pagination.js","../src/js/popular.js","../src/js/discount/api/discount-api.js","../src/js/discount/api/storage.js","../src/js/discount/markup-discount.js","../src/js/discount/discount.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://food-boutique.b.goit.study/api/';\naxios.defaults.baseURL = BASE_URL;\n\nexport async function getProductsCategories() {\n  const response = await axios.get(`${BASE_URL}products/categories`);\n\n  return response.data;\n}\n\nexport async function getProductsByParams({\n  keyword,\n  category,\n  page,\n  limit,\n  sort,\n} = {}) {\n  const params = {\n    keyword,\n    category,\n    page,\n    limit,\n  };\n\n  if (sort && sort.key && sort.value) {\n    params[sort.key] = sort.value;\n  }\n\n  const response = await axios.get(`${BASE_URL}products`, { params });\n\n  return response.data;\n}\n\nexport async function getProductById(id) {\n  const response = await axios.get(`${BASE_URL}products/${id}`);\n\n  return response.data;\n}\n\nexport async function getPopularProducts(limit) {\n  const response = await axios.get(`${BASE_URL}products/popular`, {\n    params: { limit },\n  });\n\n  return response.data;\n}\n\nexport async function getDiscountProducts() {\n  const response = await axios.get(`${BASE_URL}products/discount`);\n\n  return response.data;\n}\n\nexport async function orderSubscriptionToNewProducts(email) {\n  const response = await axios.post(`${BASE_URL}subscription/`, {\n    email,\n  });\n\n  return response.data;\n}\n\nexport async function createNewOrder(email, [{ productId, amount }]) {\n  const response = await axios.post(`${BASE_URL}orders`, {\n    email,\n    products: [\n      {\n        productId,\n        amount,\n      },\n    ],\n  });\n\n  return response.data;\n}\n","import { getProductsByParams } from './get-api';\n\nconst productsList = document.querySelector('.list-prod');\n\nconst defaultParameters = {\n  keyword: '',\n  category: '',\n  page: 1,\n  limit: 9,\n};\n\nfunction addMarkup(el, markup) {\n  el.innerHTML = markup;\n}\n\nasync function displayProducts() {\n  try {\n    const { results } = await getProductsByParams(defaultParameters);\n    const markup = createCardMarkup(results);\n    addMarkup(productsList, markup);\n  } catch (error) {\n    console.error('Ошибка при отображении продуктов:', error);\n  }\n}\n\nfunction createCardMarkup(results) {\n  return results\n    .map(({ id, name, img, category, size, price, popularity }) => {\n      return `\n        <li class=\"prod-item\" js-product-id=${id}>   \n          <div class=\"prod-pic\">\n            <svg class=\"discont-prod\" width=\"60\" height=\"60\" style=\"visibility: hidden;\">\n              <use href=\"\"></use>\n            </svg>\n            <img class=\"prod-img\" src=${img} alt=${name} loading=\"lazy\">\n          </div>\n          <h3 class=\"title-prod\">${name}</h3>\n          <div class=\"feature\">\n            <p class=\"feature-prod\">Category:<span class=\"feature-value\">${category}</span></p>\n            <p class=\"feature-prod\">Size:<span class=\"feature-value\">${size}</span></p>\n            <p class=\"feature-prod push\">Popularity:<span class=\"feature-value\">${popularity}</span></p>\n          </div>\n          <div class=\"buing-prod\">\n            <p class=\"price-prod\">${price}</p>\n            <button class=\"buy-btn\" type=\"button\">\n              <svg class=\"buy-svg\" width=\"18\" height=\"18\">\n                <use href=\"\"></use>\n              </svg>\n            </button>\n          </div>\n        </li>\n      `;\n    })\n    .join('');\n}\n\ndisplayProducts();\n","// /**\n//  |============================\n//  | ОТРИМАЛИ ДАННІ З СЕРВЕРУ \n//  |============================\n// */\n// async function getProducts(pageNumber) {\n//   const response = await fetch(\n//     `https://food-boutique.b.goit.study/api/products?page=${pageNumber}&limit=9`\n//   );\n//   const data = await response.json();\n//   return data.results;\n// }\n// // Кількість карток на сторінці\n// const cardsPerPage = 9;\n\n// // Отримати контейнери для карток та пагінації\n// const cardsContainer = document.getElementById('cards-container');\n// const paginationContainer = document.getElementById('pagination');\n\n// // Функція для відображення карток на сторінці\n// async function displayCards(page) {\n//   const products = await getProducts(page);\n\n//   cardsContainer.innerHTML = '';\n//   products.forEach(product => {\n//     const cardElement = createCard(product);\n//     cardsContainer.appendChild(cardElement);\n//   });\n// }\n\n// /**\n//    |============================\n//    | ТИМЧАСОВА КАРТКА ПРОДУКТУ  \n//    |============================\n//   */\n// function createCard(product) {\n//   const card = document.createElement('div');\n//   card.className = 'card';\n\n//   const img = document.createElement('img');\n//   img.src = product.img;\n//   img.alt = product.name;\n\n//   const name = document.createElement('p');\n//   name.textContent = product.name;\n\n//   const price = document.createElement('p');\n//   price.textContent = `Price: $${product.price}`;\n\n//   card.appendChild(img);\n//   card.appendChild(name);\n//   card.appendChild(price);\n\n//   return card;\n// }\n\n/**\n   |============================\n   | PAGINATION NAVIGATION\n   |============================\n  */\n// Функція для відображення пагінації\nasync function displayPagination(currentPage, totalPages) {\n  paginationContainer.innerHTML = '';\n\n  if (totalPages > 1) {\n    const MAX_VISIBLE_PAGES = 5; // Максимальна кількість видимих сторінок\n\n    // Додаємо посилання для поточної та сусідніх сторінок\n    for (\n      let i = Math.max(1, currentPage - 1);\n      i <= Math.min(totalPages, currentPage + 1);\n      i += 1\n    ) {\n      appendPageLink(i, i === currentPage);\n    }\n\n    // Додаємо \"...\"\n    if (totalPages - currentPage > MAX_VISIBLE_PAGES - 2) {\n      const ellipsis = document.createElement('span');\n      ellipsis.textContent = '. . .';\n      paginationContainer.appendChild(ellipsis);\n    }\n\n    // Додаємо посилання на останні дві сторінки\n    for (\n      let i = Math.max(\n        totalPages - MAX_VISIBLE_PAGES + 4\n        // totalPages - MAX_VISIBLE_PAGES + 1\n      );\n      i <= totalPages;\n      i += 1\n    ) {\n      appendPageLink(i);\n    }\n  }\n}\n\n// Функція для додавання посилання на сторінку до пагінації\nfunction appendPageLink(pageNumber, isActive = false) {\n  const li = document.createElement('li');\n  const linkWrapper = document.createElement('div');\n  linkWrapper.classList.add('pagination-link');\n  const link = document.createElement('a');\n  link.href = `javascript:void(0);`;\n  link.textContent = pageNumber;\n\n  if (isActive) {\n    linkWrapper.classList.add('active');\n  }\n\n  link.addEventListener('click', () => onPageLinkClick(pageNumber));\n  linkWrapper.appendChild(link);\n  li.appendChild(linkWrapper);\n  paginationContainer.appendChild(li);\n}\n\n// Обробник кліку на посилання пагінації\nfunction onPageLinkClick(pageNumber) {\n  displayCards(pageNumber);\n  displayPagination(pageNumber, 60); // Загальна кількість сторінок\n}\n\n// Відображення початкової сторінки\nconst initialPage = 1;\n// displayCards(initialPage);\ndisplayPagination(initialPage, 60); // Загальна кількість сторінок\n","import axios from 'axios';\n\nconst popularList = document.querySelector('.popular-list');\n\nasync function servicePopularProducts() {\n  const URL = 'https://food-boutique.b.goit.study/api/products/popular';\n  const response = await axios.get(`${URL}`);\n  return response.data;\n}\n\nfunction createMarkup(items) {\n  return items\n    .map(({ _id, name, img, category, popularity, size }) => {\n      // додав строку 15  та ретерн на 17 \n      const firstDigit = parseInt(popularity.toString()[0]);\n\n      return `  <li class=\"popular-item\">\n        <button class=\"btn-add\" type=\"submit\">svg</button>\n        <span class=\"product-added\" >OK</span>\n        <div class=\"popular-card\" id=\"${_id}\">\n          <div class=\"popular-box-img\">\n            <img src=\"${img}\" alt=\"${name}\" loading=\"lazy\"  width=\"56\" />\n          </div>\n          <div class=\"popular-description\">\n            <h3 class=\"popular-card-title\">${name}</h3>\n            <p class=\"popular-card-text category\">Category: <span class=\"popular-text\">${category.replace(\n              '_',\n              ' '\n            )}</span></p>\n            <div class=\"card-descr\">\n              <p class=\"popular-card-text\">Size: <span class=\"popular-text\">${size}</span></p>\n              <p class=\"popular-card-text\">Popularity: <span class=\"popular-text\">${firstDigit}</span></p>\n            </div>\n          </div>\n        </div>\n      </li>`;\n    })\n    .join('');\n}\n\nservicePopularProducts()\n  .then(data => {\n    popularList.insertAdjacentHTML('beforeend', createMarkup(data));\n\n    const refs = {\n      btnAdd: document.querySelector('.btn-add'),\n      productAdded: document.querySelector('.product-added'),\n      popularCard: document.querySelector('.popular-card'),\n    };\n\n    refs.btnAdd.addEventListener('click', handleOrder);\n\n    refs.popularCard.addEventListener('click', handleProductCard);\n\n    refs.productAdded.classList.remove('product-added');\n    refs.productAdded.classList.add('is-hidden');\n\n    function handleOrder() {\n      refs.btnAdd.classList.add('is-hidden');\n      refs.productAdded.classList.add('product-added');\n      refs.productAdded.classList.remove('is-hidden');\n      alert('Product add to Order');\n    }\n  })\n  .catch(error => {\n    console.error(error);\n  });\n\nfunction handleProductCard() {\n  alert('Thi is product cart');\n}\n","import axios from 'axios';\naxios.defaults.baseURL = 'https://food-boutique.b.goit.study/api/';\n\nexport function getProducts() {\n  return axios.get('products/discount').then(response => response.data);\n}\n","const STORAGE_KEY = 'product-discount';\n\nexport function getData() {\n  try {\n    const data = localStorage.getItem(STORAGE_KEY);\n    return data ? JSON.parse(data) : [];\n  } catch (error) {\n    console.lof(error.message);\n  }\n}\n\nexport function saveData(items) {\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(items));\n}\n","export function createMarkup(items = []) {\n  return items\n    .map(item => {\n      return ` <div class=\"cart-product-discount\" data-id=\"${item._id}\">\n    <div class=\"card-product-wrapper\">\n        <img class=\"cart-product-img\"\n            src=\"${item.img}\"\n            width=\"180\" height=\"180\" alt=\"${item.desc}\" />\n    </div>\n    <div class=\"card-product-info\">\n        <h3 class=\"cart-product-title\">${item.name}</h3>\n        <div class=\"card-product-info-right\">\n            <p class=\"cart-product-price\">${item.price}</p>\n\n            <button type=\"button\" class=\"cart-product-btn\">\n                <svg>\n                    <use href=\"тут посилання на іконку зі спрайту\"></use>\n                </svg>\n            </button>\n        </div>\n    </div>\n</div>\n`;\n    })\n    .join('');\n}\n","import { getProducts } from './api/discount-api';\nimport { getData, saveData } from './api/storage';\nimport { createMarkup } from './markup-discount';\n\nlet products = [];\nconst productEl = document.querySelector('.products-discount');\nconsole.log(productEl);\n\nasync function onLoad() {\n  const response = await getProducts();\n\n  products = response.slice(0, 2);\n\n  const markup = createMarkup(products);\n\n  addMarkup(markup);\n}\nonLoad();\n\nfunction addMarkup(markup) {\n  productEl.insertAdjacentHTML('beforeend', markup);\n}\n\nproductEl.addEventListener('click', onClick);\n\nfunction onClick(event) {\n  if (!event.target.closest('.cart-product-btn')) {\n    return;\n  }\n  const cardEl = event.target.closest('.cart-product-discount');\n  const id = cardEl.dataset.id;\n\n  //   console.log(data);\n  const items = getData();\n  if (items.find(item => id === item._id)) {\n    saveData(items.filter(item => id !== item._id));\n  } else {\n    const data = products.find(item => id === item._id);\n    items.push(data);\n    saveData(items);\n  }\n}\n"],"names":["BASE_URL","axios","getProductsByParams","keyword","category","page","limit","sort","params","productsList","defaultParameters","addMarkup","el","markup","displayProducts","results","createCardMarkup","error","id","name","img","size","price","popularity","displayPagination","currentPage","totalPages","i","appendPageLink","ellipsis","pageNumber","isActive","li","linkWrapper","link","onPageLinkClick","initialPage","popularList","servicePopularProducts","URL","createMarkup","items","_id","firstDigit","data","refs","handleOrder","handleProductCard","getProducts","response","STORAGE_KEY","getData","saveData","item","products","productEl","onLoad","onClick","event"],"mappings":"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"}