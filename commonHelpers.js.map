{"version":3,"file":"commonHelpers.js","sources":["../src/js/get-api.js","../src/js/pagination.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://food-boutique.b.goit.study/api/';\naxios.defaults.baseURL = BASE_URL;\n\nexport async function getProductsCategories() {\n  const response = await axios.get(`${BASE_URL}products/categories`);\n  console.log(response.data);\n  return response.data;\n}\n\nexport async function getProductsByParams(\n  keyword,\n  category,\n  page,\n  limit,\n  sort\n) {\n  const response = await axios.get(`${BASE_URL}products`, {\n    params: {\n      keyword,\n      category,\n      page,\n      limit,\n      [sort.key]: sort.value,\n    },\n  });\n\n  return response.data;\n}\n\nexport async function getProductById(id) {\n  const response = await axios.get(`${BASE_URL}products/${id}`);\n\n  return response.data;\n}\n\nexport async function getPopularProducts(limit) {\n  const response = await axios.get(`${BASE_URL}products/popular`, {\n    params: { limit },\n  });\n\n  return response.data;\n}\n\nexport async function getDiscountProducts() {\n  const response = await axios.get(`${BASE_URL}products/discount`);\n\n  return response.data;\n}\n\nexport async function orderSubscriptionToNewProducts(email) {\n  const response = await axios.post(`${BASE_URL}subscription/`, {\n    email,\n  });\n\n  return response.data;\n}\n\nasync function createNewOrder(email, [{ productId, amount }]) {\n  const response = await axios.post(`${BASE_URL}orders`, {\n    email,\n    products: [\n      {\n        productId,\n        amount,\n      },\n    ],\n  });\n\n  return response.data;\n}\n","/**\n |============================\n | ОТРИМАЛИ ДАННІ З СЕРВЕРУ \n |============================\n*/\nasync function getProducts(pageNumber) {\n  const response = await fetch(\n    `https://food-boutique.b.goit.study/api/products?page=${pageNumber}&limit=9`\n  );\n  const data = await response.json();\n  return data.results;\n}\n// Кількість карток на сторінці\nconst cardsPerPage = 9;\n\n// Отримати контейнери для карток та пагінації\nconst cardsContainer = document.getElementById('cards-container');\nconst paginationContainer = document.getElementById('pagination');\n\n// Функція для відображення карток на сторінці\nasync function displayCards(page) {\n  const products = await getProducts(page);\n\n  cardsContainer.innerHTML = '';\n  products.forEach(product => {\n    const cardElement = createCard(product);\n    cardsContainer.appendChild(cardElement);\n  });\n}\n\n/**\n   |============================\n   | ТИМЧАСОВА КАРТКА ПРОДУКТУ  \n   |============================\n  */\nfunction createCard(product) {\n  const card = document.createElement('div');\n  card.className = 'card';\n\n  const img = document.createElement('img');\n  img.src = product.img;\n  img.alt = product.name;\n\n  const name = document.createElement('p');\n  name.textContent = product.name;\n\n  const price = document.createElement('p');\n  price.textContent = `Price: $${product.price}`;\n\n  card.appendChild(img);\n  card.appendChild(name);\n  card.appendChild(price);\n\n  return card;\n}\n\n/**\n   |============================\n   | PAGINATION NAVIGATION\n   |============================\n  */\n// Функція для відображення пагінації\nasync function displayPagination(currentPage, totalPages) {\n  paginationContainer.innerHTML = '';\n\n  if (totalPages > 1) {\n    const MAX_VISIBLE_PAGES = 5; // Максимальна кількість видимих сторінок\n\n    // Додаємо посилання для поточної та сусідніх сторінок\n    for (\n      let i = Math.max(1, currentPage - 1);\n      i <= Math.min(totalPages, currentPage + 1);\n      i += 1\n    ) {\n      appendPageLink(i, i === currentPage);\n    }\n\n    // Додаємо \"...\"\n    if (totalPages - currentPage > MAX_VISIBLE_PAGES - 2) {\n      const ellipsis = document.createElement('span');\n      ellipsis.textContent = '. . .';\n      paginationContainer.appendChild(ellipsis);\n    }\n\n    // Додаємо посилання на останні дві сторінки\n    for (\n      let i = Math.max(\n        totalPages - MAX_VISIBLE_PAGES + 4\n        // totalPages - MAX_VISIBLE_PAGES + 1\n      );\n      i <= totalPages;\n      i += 1\n    ) {\n      appendPageLink(i);\n    }\n  }\n}\n\n// Функція для додавання посилання на сторінку до пагінації\nfunction appendPageLink(pageNumber, isActive = false) {\n  const li = document.createElement('li');\n  const linkWrapper = document.createElement('div');\n  linkWrapper.classList.add('pagination-link');\n  const link = document.createElement('a');\n  link.href = `javascript:void(0);`;\n  link.textContent = pageNumber;\n\n  if (isActive) {\n    linkWrapper.classList.add('active');\n  }\n\n  link.addEventListener('click', () => onPageLinkClick(pageNumber));\n  linkWrapper.appendChild(link);\n  li.appendChild(linkWrapper);\n  paginationContainer.appendChild(li);\n}\n\n// Обробник кліку на посилання пагінації\nfunction onPageLinkClick(pageNumber) {\n  displayCards(pageNumber);\n  displayPagination(pageNumber, 60); // Загальна кількість сторінок\n}\n\n// Відображення початкової сторінки\nconst initialPage = 1;\ndisplayCards(initialPage);\ndisplayPagination(initialPage, 60); // Загальна кількість сторінок\n"],"names":["BASE_URL","axios","getProducts","pageNumber","cardsContainer","paginationContainer","displayCards","page","products","product","cardElement","createCard","card","img","name","price","displayPagination","currentPage","totalPages","i","appendPageLink","ellipsis","isActive","li","linkWrapper","link","onPageLinkClick","initialPage"],"mappings":"svBAEA,MAAMA,EAAW,0CACjBC,EAAM,SAAS,QAAUD,ECEzB,eAAeE,EAAYC,EAAY,CAKrC,OADa,MAHI,MAAM,MACrB,wDAAwDA,WAC5D,GAC8B,QAChB,OACd,CAKA,MAAMC,EAAiB,SAAS,eAAe,iBAAiB,EAC1DC,EAAsB,SAAS,eAAe,YAAY,EAGhE,eAAeC,EAAaC,EAAM,CAChC,MAAMC,EAAW,MAAMN,EAAYK,CAAI,EAEvCH,EAAe,UAAY,GAC3BI,EAAS,QAAQC,GAAW,CAC1B,MAAMC,EAAcC,EAAWF,CAAO,EACtCL,EAAe,YAAYM,CAAW,CAC1C,CAAG,CACH,CAOA,SAASC,EAAWF,EAAS,CAC3B,MAAMG,EAAO,SAAS,cAAc,KAAK,EACzCA,EAAK,UAAY,OAEjB,MAAMC,EAAM,SAAS,cAAc,KAAK,EACxCA,EAAI,IAAMJ,EAAQ,IAClBI,EAAI,IAAMJ,EAAQ,KAElB,MAAMK,EAAO,SAAS,cAAc,GAAG,EACvCA,EAAK,YAAcL,EAAQ,KAE3B,MAAMM,EAAQ,SAAS,cAAc,GAAG,EACxC,OAAAA,EAAM,YAAc,WAAWN,EAAQ,QAEvCG,EAAK,YAAYC,CAAG,EACpBD,EAAK,YAAYE,CAAI,EACrBF,EAAK,YAAYG,CAAK,EAEfH,CACT,CAQA,eAAeI,EAAkBC,EAAaC,EAAY,CAGxD,GAFAb,EAAoB,UAAY,GAE5Ba,EAAa,EAAG,CAIlB,QACMC,EAAI,KAAK,IAAI,EAAGF,EAAc,CAAC,EACnCE,GAAK,KAAK,IAAID,EAAYD,EAAc,CAAC,EACzCE,GAAK,EAELC,EAAeD,EAAGA,IAAMF,CAAW,EAIrC,GAAIC,EAAaD,EAAc,EAAoB,EAAG,CACpD,MAAMI,EAAW,SAAS,cAAc,MAAM,EAC9CA,EAAS,YAAc,QACvBhB,EAAoB,YAAYgB,CAAQ,CACzC,CAGD,QACMF,EAAI,KAAK,IACXD,EAAa,EAAoB,CAElC,EACDC,GAAKD,EACLC,GAAK,EAELC,EAAeD,CAAC,CAEnB,CACH,CAGA,SAASC,EAAejB,EAAYmB,EAAW,GAAO,CACpD,MAAMC,EAAK,SAAS,cAAc,IAAI,EAChCC,EAAc,SAAS,cAAc,KAAK,EAChDA,EAAY,UAAU,IAAI,iBAAiB,EAC3C,MAAMC,EAAO,SAAS,cAAc,GAAG,EACvCA,EAAK,KAAO,sBACZA,EAAK,YAActB,EAEfmB,GACFE,EAAY,UAAU,IAAI,QAAQ,EAGpCC,EAAK,iBAAiB,QAAS,IAAMC,EAAgBvB,CAAU,CAAC,EAChEqB,EAAY,YAAYC,CAAI,EAC5BF,EAAG,YAAYC,CAAW,EAC1BnB,EAAoB,YAAYkB,CAAE,CACpC,CAGA,SAASG,EAAgBvB,EAAY,CACnCG,EAAaH,CAAU,EACvBa,EAAkBb,EAAY,EAAE,CAClC,CAGA,MAAMwB,EAAc,EACpBrB,EAAaqB,CAAW,EACxBX,EAAkBW,EAAa,EAAE"}