{"version":3,"file":"footer-4de1f2f7.js","sources":["../../src/images/icons.svg","../../src/js/get-api.js","../../src/js/STORAGE.js","../../src/js/footer.js"],"sourcesContent":["export default \"__VITE_ASSET__10f6c6ff__\"","import axios from 'axios';\n\nconst BASE_URL = 'https://food-boutique.b.goit.study/api/';\naxios.defaults.baseURL = BASE_URL;\n\nexport function getProducts() {\n  return axios.get('products/discount').then(response => response.data);\n}\nexport async function getProductsCategories() {\n  const response = await axios.get(`${BASE_URL}products/categories`);\n\n  return response.data;\n}\n\nexport async function getProductsByParams({\n  keyword,\n  category,\n  page,\n  limit,\n  sort,\n} = {}) {\n  const params = {\n    keyword,\n    category,\n    page,\n    limit,\n  };\n\n  if (sort && sort.key && sort.value) {\n    params[sort.key] = sort.value;\n  }\n\n  const response = await axios.get(`${BASE_URL}products`, { params });\n\n  return response.data;\n}\n\nexport async function getProductById(id) {\n  const response = await axios.get(`${BASE_URL}products/${id}`);\n\n  return response.data;\n}\n\nexport async function getPopularProducts(limit) {\n  const response = await axios.get(`${BASE_URL}products/popular`, {\n    params: { limit },\n  });\n\n  return response.data;\n}\n\nexport async function getDiscountProducts() {\n  const response = await axios.get(`${BASE_URL}products/discount`);\n\n  return response.data;\n}\n\nexport async function orderSubscriptionToNewProducts(email) {\n  const response = await axios.post(`${BASE_URL}subscription/`, {\n    email,\n  });\n\n  return response.data;\n}\n\nexport async function createNewOrder(email, products) {\n  return await axios\n    .post(`${BASE_URL}orders`, {\n      email,\n      products,\n    })\n    .then(response => response.data);\n}","export const STORAGE_KEY = 'added-item';\nexport const FIRST_SET_KEY = 'firstset';\n\ncountAddedItems();\n\nexport function saveData(key, data) {\n  localStorage.setItem(key, JSON.stringify(data));\n}\nexport function getData(key) {\n  try {\n    const result = localStorage.getItem(key);\n    return result ? JSON.parse(result) : [];\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nexport function countAddedItems() {\n  const headerCount = document.querySelector('#countProducts');\n  const itemArr = getData(STORAGE_KEY);\n  headerCount.textContent = `Cart (${itemArr.length})`;\n}\n\nexport function checkAdded(array, product) {\n  const item = array.findIndex(({ _id }) => _id === product._id);\n  return item;\n}\n\nexport function manageButton(item, added, removed) {\n  if (item !== -1) {\n    removed.classList.remove('visually-hidden');\n    added.classList.add('visually-hidden');\n  } else {\n    added.classList.remove('visually-hidden');\n    removed.classList.add('visually-hidden');\n  }\n}\n\nexport function changeIcon(elt, added, itemClass) {\n  if (elt !== -1) {\n    added[1].classList.add(itemClass);\n    added[0].classList.remove(itemClass);\n  } else {\n    added[1].classList.remove(itemClass);\n    added[0].classList.add(itemClass);\n  }\n}\n\nexport function changeOtherIcon(id, element) {\n  const productCartBtn = document.querySelectorAll(\n    \"svg[data-js-product='\" + id + \"']\"\n  );\n  const popularCartBtn = document.querySelectorAll(\n    \"button[data-js-button='\" + id + \"']\"\n  );\n  const discontCartBtn = document.querySelectorAll(\n    \"svg[data-js-discont='\" + id + \"']\"\n  );\n\n  if (popularCartBtn.length !== 0) {\n    changeIcon(element, popularCartBtn, 'visually-hidden');\n  }\n  if (discontCartBtn.length !== 0) {\n    changeIcon(element, discontCartBtn, 'is-hidden');\n  }\n  if (productCartBtn.length !== 0) {\n    changeIcon(element, productCartBtn, 'is-hidden');\n  }\n  countAddedItems();\n}\n\nexport function recheckCart(item) {\n  saveData(STORAGE_KEY, listProducts);\n  countAddedItems();\n  item = checkAdded(listProducts, product);\n  manageButton(item, addToCartBtn, removeFromBtn);\n}\n","import throttle from 'lodash.throttle';\nimport { orderSubscriptionToNewProducts } from './get-api';\n\nconst form = document.querySelector('.feedback-form');\nconst localStorageKey = 'feedback-form-state';\nconst myButton = document.getElementById('footer-button');\n\nconst refs = {\n  menu: document.querySelector('[data-menu]'),\n  one: document.querySelector('[data-one]'),\n  two: document.querySelector('[data-two]'),\n};\n\nform.addEventListener('submit', onPost);\nfunction onPost(event) {\n  event.preventDefault();\n  const userEmail = form.elements.email.value;\n  orderSubscriptionToNewProducts(userEmail)\n    .then(data => {\n      if (data.message) {\n        refs.menu.classList.remove('is-hidden');\n        refs.one.classList.remove('is-hidden');\n      }\n      refs.two.classList.add('is-hidden');\n    })\n    .catch(error => {\n      refs.menu.classList.remove('is-hidden');\n      refs.two.classList.remove('is-hidden');\n      refs.one.classList.add('is-hidden');\n    });\n}\n\nconst saveFormState = throttle(() => {\n  const formData = {\n    email: form.elements.email.value,\n  };\n  \n  localStorage.setItem(localStorageKey, JSON.stringify(formData));\n}, 500);\n\nwindow.addEventListener('load', () => {\n  const savedFormData = localStorage.getItem(localStorageKey);\n  if (savedFormData) {\n    const { email } = JSON.parse(savedFormData);\n    form.elements.email.value = email;\n  }\n});\n\nform.addEventListener('input', () => {\n  saveFormState();\n  validateForm();\n});\n\nform.addEventListener('submit', evt => {\n  evt.preventDefault();\n  const formData = {\n    email: form.elements.email.value,\n  };\n  localStorage.removeItem(localStorageKey);\n  form.reset();\n  validateForm();\n});\n\nmyButton.addEventListener('click', function () {\n  console.log('Button clicked');\n  const savedFormData = localStorage.getItem(localStorageKey);\n\n  if (savedFormData) {\n    const { email } = JSON.parse(savedFormData);\n    form.elements.email.value = email;\n    validateForm();\n  }\n});\n\nconst validateForm = () => {\n  const emailValue = form.elements.email.value;\n  const isValidEmail = isValidEmailFormat(emailValue);\n  const isFilled = emailValue.trim() !== '';\n  myButton.disabled = !(isValidEmail && isFilled);\n};\n\nconst isValidEmailFormat = email => {\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n  return emailRegex.test(email);\n};\n\nconst autoFillForm = () => {\n  const savedFormData = localStorage.getItem(localStorageKey);\n  if (savedFormData) {\n    const { email } = JSON.parse(savedFormData);\n    form.elements.email.value = email;\n    validateForm();\n  }\n};\n\nautoFillForm();\n\ndocument.body.style.overflow = 'auto';\n\n(() => {\n  const refs = {\n    openMenuBtn: document.querySelector('[data-menu-open]'),\n    closeMenuBtn: document.querySelector('[data-menu-close]'),\n    menu: document.querySelector('[data-menu]'),\n  };\n\n  function toggleMenu() {\n    refs.menu.classList.toggle('is-hidden');\n    document.body.classList.toggle('no-scroll');\n\n    if (refs.menu.classList.contains('is-hidden')) {\n      document.body.style.overflow = 'auto';\n    } else {\n      document.body.style.overflow = 'hidden';\n    }\n  }\n\n  const links = Array.from(refs.menu.children);\n  links.forEach(link => {\n    link.addEventListener('click', closeOnClick);\n  });\n\n  function closeOnClick() {\n    refs.menu.classList.add('is-hidden');\n    document.body.classList.remove('no-scroll');\n    document.body.style.overflow = 'auto';\n  }\n\n  refs.openMenuBtn.addEventListener('click', toggleMenu);\n  refs.closeMenuBtn.addEventListener('click', toggleMenu);\n\n  function closeOnEsc(event) {\n    if (event.key === 'Escape') {\n      refs.menu.classList.add('is-hidden');\n      document.body.classList.remove('no-scroll');\n      if (refs.menu.classList.contains('is-hidden')) {\n        document.body.style.overflow = 'auto';\n      }\n    }\n  }\n  document.addEventListener('keydown', closeOnEsc);\n})();\n"],"names":["sprite","BASE_URL","axios","getProducts","response","getProductsCategories","getProductsByParams","keyword","category","page","limit","sort","params","getProductById","id","getPopularProducts","orderSubscriptionToNewProducts","email","createNewOrder","products","STORAGE_KEY","FIRST_SET_KEY","countAddedItems","saveData","key","data","getData","result","error","headerCount","itemArr","checkAdded","array","product","_id","manageButton","item","added","removed","changeIcon","elt","itemClass","changeOtherIcon","element","productCartBtn","popularCartBtn","discontCartBtn","form","localStorageKey","myButton","refs","onPost","event","userEmail","saveFormState","throttle","formData","savedFormData","validateForm","evt","emailValue","isValidEmail","isValidEmailFormat","isFilled","autoFillForm","toggleMenu","link","closeOnClick","closeOnEsc"],"mappings":"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"}