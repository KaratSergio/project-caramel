import{a as r,l as p}from"./vendor-081dd1c4.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const u of n.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&a(u)}).observe(document,{childList:!0,subtree:!0});function o(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerpolicy&&(n.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?n.credentials="include":s.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(s){if(s.ep)return;s.ep=!0;const n=o(s);fetch(s.href,n)}})();const I="/project-caramel/assets/icons-89cc0206.svg",i="https://food-boutique.b.goit.study/api/";r.defaults.baseURL=i;function O(){return r.get("products/discount").then(e=>e.data)}async function B(){return(await r.get(`${i}products/categories`)).data}async function q({keyword:e,category:t,page:o,limit:a,sort:s}={}){const n={keyword:e,category:t,page:o,limit:a};return s&&s.key&&s.value&&(n[s.key]=s.value),(await r.get(`${i}products`,{params:n})).data}async function F(e){return(await r.get(`${i}products/${e}`)).data}async function P(e){return(await r.get(`${i}products/popular`,{params:{limit:e}})).data}async function v(e){return(await r.post(`${i}subscription/`,{email:e})).data}async function N(e,t){return await r.post(`${i}orders`,{email:e,products:t}).then(o=>o.data)}const h="added-item",A="firstset";y();function $(e,t){localStorage.setItem(e,JSON.stringify(t))}function L(e){try{const t=localStorage.getItem(e);return t?JSON.parse(t):[]}catch(t){console.log(t)}}function y(){const e=document.querySelector("#countProducts"),t=L(h);e.textContent=`Cart (${t.length})`}function D(e,t){return e.findIndex(({_id:a})=>a===t._id)}function x(e,t,o){e!==-1?(o.classList.remove("visually-hidden"),t.classList.add("visually-hidden")):(t.classList.remove("visually-hidden"),o.classList.add("visually-hidden"))}function f(e,t,o){e!==-1?(t[1].classList.add(o),t[0].classList.remove(o)):(t[1].classList.remove(o),t[0].classList.add(o))}function J(e,t){const o=document.querySelectorAll("svg[data-js-product='"+e+"']"),a=document.querySelectorAll("button[data-js-button='"+e+"']"),s=document.querySelectorAll("svg[data-js-discont='"+e+"']");a.length!==0&&f(t,a,"visually-hidden"),s.length!==0&&f(t,s,"is-hidden"),o.length!==0&&f(t,o,"is-hidden"),y()}const c=document.querySelector(".feedback-form"),d="feedback-form-state",g=document.getElementById("footer-button"),l={menu:document.querySelector("[data-menu]"),one:document.querySelector("[data-one]"),two:document.querySelector("[data-two]")};c.addEventListener("submit",S);function S(e){e.preventDefault();const t=c.elements.email.value;v(t).then(o=>{o.message&&(l.menu.classList.remove("is-hidden"),l.one.classList.remove("is-hidden")),l.two.classList.add("is-hidden")}).catch(o=>{l.menu.classList.remove("is-hidden"),l.two.classList.remove("is-hidden"),l.one.classList.add("is-hidden")})}const b=p(()=>{const e={email:c.elements.email.value};localStorage.setItem(d,JSON.stringify(e))},500);window.addEventListener("load",()=>{const e=localStorage.getItem(d);if(e){const{email:t}=JSON.parse(e);c.elements.email.value=t}});c.addEventListener("input",()=>{b(),m()});c.addEventListener("submit",e=>{e.preventDefault(),c.elements.email.value,localStorage.removeItem(d),c.reset(),m()});g.addEventListener("click",function(){console.log("Button clicked");const e=localStorage.getItem(d);if(e){const{email:t}=JSON.parse(e);c.elements.email.value=t,m()}});const m=()=>{const e=c.elements.email.value,t=E(e),o=e.trim()!=="";g.disabled=!(t&&o)},E=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),w=()=>{const e=localStorage.getItem(d);if(e){const{email:t}=JSON.parse(e);c.elements.email.value=t,m()}};w();document.body.style.overflow="auto";(()=>{const e={openMenuBtn:document.querySelector("[data-menu-open]"),closeMenuBtn:document.querySelector("[data-menu-close]"),menu:document.querySelector("[data-menu]")};function t(){e.menu.classList.toggle("is-hidden"),document.body.classList.toggle("no-scroll"),e.menu.classList.contains("is-hidden")?document.body.style.overflow="auto":document.body.style.overflow="hidden"}Array.from(e.menu.children).forEach(n=>{n.addEventListener("click",a)});function a(){e.menu.classList.add("is-hidden"),document.body.classList.remove("no-scroll"),document.body.style.overflow="auto"}e.openMenuBtn.addEventListener("click",t),e.closeMenuBtn.addEventListener("click",t);function s(n){n.key==="Escape"&&(e.menu.classList.add("is-hidden"),document.body.classList.remove("no-scroll"),e.menu.classList.contains("is-hidden")&&(document.body.style.overflow="auto"))}document.addEventListener("keydown",s)})();export{A as F,h as S,I as a,D as b,N as c,y as d,J as e,F as f,L as g,q as h,B as i,P as j,O as k,x as m,$ as s};
//# sourceMappingURL=footer-3e6b021c.js.map
