{"version":3,"file":"STORAGE-9186a88d.js","sources":["../../src/images/icons.svg","../../src/js/get-api.js","../../src/js/STORAGE.js"],"sourcesContent":["export default \"__VITE_ASSET__10f6c6ff__\"","import axios from 'axios';\n\nconst BASE_URL = 'https://food-boutique.b.goit.study/api/';\naxios.defaults.baseURL = BASE_URL;\n\nexport function getProducts() {\n  return axios.get('products/discount').then(response => response.data);\n}\nexport async function getProductsCategories() {\n  const response = await axios.get(`${BASE_URL}products/categories`);\n\n  return response.data;\n}\n\nexport async function getProductsByParams({\n  keyword,\n  category,\n  page,\n  limit,\n  sort,\n} = {}) {\n  const params = {\n    keyword,\n    category,\n    page,\n    limit,\n  };\n\n  if (sort && sort.key && sort.value) {\n    params[sort.key] = sort.value;\n  }\n\n  const response = await axios.get(`${BASE_URL}products`, { params });\n\n  return response.data;\n}\n\nexport async function getProductById(id) {\n  const response = await axios.get(`${BASE_URL}products/${id}`);\n\n  return response.data;\n}\n\nexport async function getPopularProducts(limit) {\n  const response = await axios.get(`${BASE_URL}products/popular`, {\n    params: { limit },\n  });\n\n  return response.data;\n}\n\nexport async function getDiscountProducts() {\n  const response = await axios.get(`${BASE_URL}products/discount`);\n\n  return response.data;\n}\n\nexport async function orderSubscriptionToNewProducts(email) {\n  const response = await axios.post(`${BASE_URL}subscription/`, {\n    email,\n  });\n\n  return response.data;\n}\n\nexport async function createNewOrder(email, products) {\n  return await axios\n    .post(`${BASE_URL}orders`, {\n      email,\n      products,\n    })\n    .then(response => response.data);\n}","export const STORAGE_KEY = 'added-item';\nexport const FIRST_SET_KEY = 'firstset';\n\ncountAddedItems();\n\nexport function saveData(key, data) {\n  localStorage.setItem(key, JSON.stringify(data));\n}\nexport function getData(key) {\n  try {\n    const result = localStorage.getItem(key);\n    return result ? JSON.parse(result) : [];\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nexport function countAddedItems() {\n  const headerCount = document.querySelector('#countProducts');\n  const itemArr = getData(STORAGE_KEY);\n  headerCount.textContent = `Cart (${itemArr.length})`;\n}\n\nexport function checkAdded(array, product) {\n  const item = array.findIndex(({ _id }) => _id === product._id);\n  return item;\n}\n\nexport function manageButton(item, added, removed) {\n  if (item !== -1) {\n    removed.classList.remove('visually-hidden');\n    added.classList.add('visually-hidden');\n  } else {\n    added.classList.remove('visually-hidden');\n    removed.classList.add('visually-hidden');\n  }\n}\n\nexport function changeIcon(elt, added, itemClass) {\n  if (elt !== -1) {\n    added[1].classList.add(itemClass);\n    added[0].classList.remove(itemClass);\n  } else {\n    added[1].classList.remove(itemClass);\n    added[0].classList.add(itemClass);\n  }\n}\n\nexport function changeOtherIcon(id, element) {\n  const productCartBtn = document.querySelectorAll(\n    \"svg[data-js-product='\" + id + \"']\"\n  );\n  const popularCartBtn = document.querySelectorAll(\n    \"button[data-js-button='\" + id + \"']\"\n  );\n  const discontCartBtn = document.querySelectorAll(\n    \"svg[data-js-discont='\" + id + \"']\"\n  );\n\n  if (popularCartBtn.length !== 0) {\n    changeIcon(element, popularCartBtn, 'visually-hidden');\n  }\n  if (discontCartBtn.length !== 0) {\n    changeIcon(element, discontCartBtn, 'is-hidden');\n  }\n  if (productCartBtn.length !== 0) {\n    changeIcon(element, productCartBtn, 'is-hidden');\n  }\n  countAddedItems();\n}\n\nexport function recheckCart(item) {\n  saveData(STORAGE_KEY, listProducts);\n  countAddedItems();\n  item = checkAdded(listProducts, product);\n  manageButton(item, addToCartBtn, removeFromBtn);\n}\n"],"names":["sprite","BASE_URL","axios","getProducts","response","getProductsCategories","getProductsByParams","keyword","category","page","limit","sort","params","getProductById","id","getPopularProducts","createNewOrder","email","products","STORAGE_KEY","FIRST_SET_KEY","countAddedItems","saveData","key","data","getData","result","error","headerCount","itemArr","checkAdded","array","product","_id","manageButton","item","added","removed","changeIcon","elt","itemClass","changeOtherIcon","element","productCartBtn","popularCartBtn","discontCartBtn"],"mappings":"0uBAAA,MAAeA,EAAA,6CCETC,EAAW,0CACjBC,EAAM,SAAS,QAAUD,EAElB,SAASE,GAAc,CAC5B,OAAOD,EAAM,IAAI,mBAAmB,EAAE,KAAKE,GAAYA,EAAS,IAAI,CACtE,CACO,eAAeC,GAAwB,CAG5C,OAFiB,MAAMH,EAAM,IAAI,GAAGD,sBAA6B,GAEjD,IAClB,CAEO,eAAeK,EAAoB,CACxC,QAAAC,EACA,SAAAC,EACA,KAAAC,EACA,MAAAC,EACA,KAAAC,CACF,EAAI,GAAI,CACN,MAAMC,EAAS,CACb,QAAAL,EACA,SAAAC,EACA,KAAAC,EACA,MAAAC,CACJ,EAEE,OAAIC,GAAQA,EAAK,KAAOA,EAAK,QAC3BC,EAAOD,EAAK,KAAOA,EAAK,QAGT,MAAMT,EAAM,IAAI,GAAGD,YAAoB,CAAE,OAAAW,CAAM,CAAE,GAElD,IAClB,CAEO,eAAeC,EAAeC,EAAI,CAGvC,OAFiB,MAAMZ,EAAM,IAAI,GAAGD,aAAoBa,GAAI,GAE5C,IAClB,CAEO,eAAeC,EAAmBL,EAAO,CAK9C,OAJiB,MAAMR,EAAM,IAAI,GAAGD,oBAA4B,CAC9D,OAAQ,CAAE,MAAAS,CAAO,CACrB,CAAG,GAEe,IAClB,CAgBO,eAAeM,EAAeC,EAAOC,EAAU,CACpD,OAAO,MAAMhB,EACV,KAAK,GAAGD,UAAkB,CACzB,MAAAgB,EACA,SAAAC,CACN,CAAK,EACA,KAAKd,GAAYA,EAAS,IAAI,CACnC,CCxEY,MAACe,EAAc,aACdC,EAAgB,WAE7BC,IAEO,SAASC,EAASC,EAAKC,EAAM,CAClC,aAAa,QAAQD,EAAK,KAAK,UAAUC,CAAI,CAAC,CAChD,CACO,SAASC,EAAQF,EAAK,CAC3B,GAAI,CACF,MAAMG,EAAS,aAAa,QAAQH,CAAG,EACvC,OAAOG,EAAS,KAAK,MAAMA,CAAM,EAAI,CAAA,CACtC,OAAQC,EAAP,CACA,QAAQ,IAAIA,CAAK,CAClB,CACH,CAEO,SAASN,GAAkB,CAChC,MAAMO,EAAc,SAAS,cAAc,gBAAgB,EACrDC,EAAUJ,EAAQN,CAAW,EACnCS,EAAY,YAAc,SAASC,EAAQ,SAC7C,CAEO,SAASC,EAAWC,EAAOC,EAAS,CAEzC,OADaD,EAAM,UAAU,CAAC,CAAE,IAAAE,CAAG,IAAOA,IAAQD,EAAQ,GAAG,CAE/D,CAEO,SAASE,EAAaC,EAAMC,EAAOC,EAAS,CAC7CF,IAAS,IACXE,EAAQ,UAAU,OAAO,iBAAiB,EAC1CD,EAAM,UAAU,IAAI,iBAAiB,IAErCA,EAAM,UAAU,OAAO,iBAAiB,EACxCC,EAAQ,UAAU,IAAI,iBAAiB,EAE3C,CAEO,SAASC,EAAWC,EAAKH,EAAOI,EAAW,CAC5CD,IAAQ,IACVH,EAAM,GAAG,UAAU,IAAII,CAAS,EAChCJ,EAAM,GAAG,UAAU,OAAOI,CAAS,IAEnCJ,EAAM,GAAG,UAAU,OAAOI,CAAS,EACnCJ,EAAM,GAAG,UAAU,IAAII,CAAS,EAEpC,CAEO,SAASC,EAAgB3B,EAAI4B,EAAS,CAC3C,MAAMC,EAAiB,SAAS,iBAC9B,wBAA0B7B,EAAK,IACnC,EACQ8B,EAAiB,SAAS,iBAC9B,0BAA4B9B,EAAK,IACrC,EACQ+B,EAAiB,SAAS,iBAC9B,wBAA0B/B,EAAK,IACnC,EAEM8B,EAAe,SAAW,GAC5BN,EAAWI,EAASE,EAAgB,iBAAiB,EAEnDC,EAAe,SAAW,GAC5BP,EAAWI,EAASG,EAAgB,WAAW,EAE7CF,EAAe,SAAW,GAC5BL,EAAWI,EAASC,EAAgB,WAAW,EAEjDtB,GACF"}